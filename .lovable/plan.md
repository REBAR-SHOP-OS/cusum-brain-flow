

## ุงุถุงูู ฺฉุฑุฏู ุฏฺฉูู ุจุงุฒุณุงุฒ (Regenerate) ุฒุฑ ูุฑ ุชุตูุฑ

### ุฎูุงุตู
ุฒุฑ ูุฑ ุชุตูุฑ ุชููุฏ ุดุฏู ุฏุฑ ฺุช Pixelุ ฺฉ ุฏฺฉูู ุจุง ุขฺฉูู "ุจุงุฒุณุงุฒ" (refresh) ุงุถุงูู ูโุดูุฏ. ุจุง ฺฉูฺฉ ุฑู ุขูุ ุงุฌูุช ฺฉ ุชุตูุฑ ุฌุฏุฏ ููุฑุงู ุจุง ฺฉูพุดู ุฌุฏุฏ ุชููุฏ ูโฺฉูุฏ ู ุฌุงฺฏุฒู ูุจู ูโุดูุฏ.

### ุชุบุฑุงุช

**1. ูุงู `src/components/chat/RichMarkdown.tsx`**
- ุฏุฑ ฺฉุงููพูููุช `img`ุ ฺฉ ุฏฺฉูู ุจุง ุขฺฉูู `RefreshCw` ุงุฒ lucide-react ุงุถุงูู ูโุดูุฏ
- ุงู ุฏฺฉูู ฺฉ callback `onRegenerateImage` ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ ู `src` ุชุตูุฑ (URL) ู `alt` (ูุงู ูุญุตูู) ุฑุง ุจู ุนููุงู ูพุงุฑุงูุชุฑ ุงุฑุณุงู ูโฺฉูุฏ
- Props ุฌุฏุฏ: `onRegenerateImage?: (imageUrl: string, alt: string) => void`

**2. ูุงู `src/components/chat/ChatMessage.tsx`**
- ูพุฑุงูพ `onRegenerateImage` ุฑุง ุงุฒ parent ุฏุฑุงูุช ฺฉุฑุฏู ู ุจู `RichMarkdown` ูพุงุณ ูโุฏูุฏ

**3. ูุงู `src/components/chat/ChatThread.tsx`**
- ูพุฑุงูพ `onRegenerateImage` ุฑุง ุงุฒ parent ุฏุฑุงูุช ู ุจู ูุฑ `ChatMessage` ูพุงุณ ูโุฏูุฏ

**4. ูุงู `src/pages/AgentWorkspace.tsx`**
- ุชุงุจุน `handleRegenerateImage` ุงุถุงูู ูโุดูุฏ
- ุงู ุชุงุจุน ูพุงู "Regenerate post for [product name]" ุฑุง ุจู ุงุฌูุช ุงุฑุณุงู ูโฺฉูุฏ
- ูุชุฌู (ุชุตูุฑ ู ฺฉูพุดู ุฌุฏุฏ) ุจู ุนููุงู ฺฉ ูพุงู ุฌุฏุฏ ุฏุฑ ฺุช ููุงุด ุฏุงุฏู ูโุดูุฏ
- ูพุฑุงูพ `onRegenerateImage` ุจู `ChatThread` ูพุงุณ ุฏุงุฏู ูโุดูุฏ

**5. ูุงู `supabase/functions/ai-agent/index.ts`**
- ุงูฺฏู "regenerate post for..." ุง "ุจุงุฒุณุงุฒ ูพุณุช..." ุฑุง ุดูุงุณุง ูโฺฉูุฏ
- ููุท **ฺฉ ุชุตูุฑ** ุชููุฏ ูโฺฉูุฏ (ูู 5 ุชุง)
- ฺฉ ฺฉูพุดู ุฌุฏุฏ ูู ุชููุฏ ูโฺฉูุฏ
- ูุชุฌู ุฑุง ุจู ููุงู ูุฑูุช markdown ุจุฑูโฺฏุฑุฏุงูุฏ (ุชุตูุฑ + ฺฉูพุดู + ูุดุชฺฏ)

### ุฌุฑุงู ฺฉุงุฑุจุฑ

```text
1. ฺฉุงุฑุจุฑ ุนุฏุฏ 1 ุฑุง ุงุฑุณุงู ูโฺฉูุฏ -> 5 ูพุณุช ุจุง ุชุตูุฑ ุชููุฏ ูโุดูุฏ
2. ุฒุฑ ูุฑ ุชุตูุฑ: [Download] ู [๐ Regenerate] ููุงุด ุฏุงุฏู ูโุดูุฏ
3. ฺฉุงุฑุจุฑ ุฑู ๐ ฺฉูฺฉ ูโฺฉูุฏ
4. ูพุงู "Regenerate post for [product]" ุฎูุฏฺฉุงุฑ ุงุฑุณุงู ูโุดูุฏ
5. ุงุฌูุช ฺฉ ุชุตูุฑ ุฌุฏุฏ + ฺฉูพุดู ุฌุฏุฏ ุชููุฏ ู ุจู ุนููุงู ูพุงู ุฌุฏุฏ ููุงุด ูโุฏูุฏ
```

### ุฌุฒุฆุงุช ูู

- ุฏฺฉูู regenerate ููุท ุจุฑุง ุชุตุงูุฑ ููุงุด ุฏุงุฏู ูโุดูุฏ ฺฉู URL ุขููุง ุดุงูู `social-images` ุจุงุดุฏ (ุชุตุงูุฑ ุชููุฏ Pixel)
- ุฏุฑ edge functionุ ุงูฺฏู regex: `/^regenerate\s+(?:post|image)\s+(?:for\s+)?(.+)/i` ุจุฑุง ุดูุงุณุง ุฏุฑุฎูุงุณุช ุจุงุฒุณุงุฒ
- ููุท ฺฉ ุชุตูุฑ ุชููุฏ ูโุดูุฏ (ูู 5)ุ ุจูุงุจุฑุงู ุณุฑุนโุชุฑ ุงุณุช
- ุชุตูุฑ ุฌุฏุฏ ูู ุจู Storage ุขูพููุฏ ูโุดูุฏ

