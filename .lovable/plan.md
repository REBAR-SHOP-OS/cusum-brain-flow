

## رفع مشکل تشخیص تاریخ و تولید تصویر برای هر اسلات زمانی

### مشکل
وقتی کاربر تاریخ را به فرمت فارسی (مثلا "13 فوریه ی 2026") ارسال می‌کند، سیستم تاریخ را تشخیص نمی‌دهد و فقط متن (کپشن و هشتگ) تولید می‌کند — بدون تصویر.

علت: الگوهای regex فعلی فقط فرمت‌های `YYYY-MM-DD`، `DD/MM/YYYY`، و کلمات `today/tomorrow/فردا/امروز` را شناسایی می‌کنند. نام‌های ماه فارسی و انگلیسی (فوریه، February، بهمن، ...) پوشش داده نشده‌اند.

### راه‌حل
الگوهای تشخیص تاریخ را گسترش می‌دهیم تا شامل موارد زیر شوند:

**فایل: `supabase/functions/ai-agent/index.ts`**

1. اضافه کردن الگوهای جدید تاریخ:
   - نام ماه‌های فارسی: `فوریه`، `مارس`، `آوریل`، `ژانویه`، `می`، `ژوئن`، `ژوئیه`، `اوت`، `سپتامبر`، `اکتبر`، `نوامبر`، `دسامبر`، `فروردین`، `اردیبهشت`، `خرداد`، `تیر`، `مرداد`، `شهریور`، `مهر`، `آبان`، `آذر`، `دی`، `بهمن`، `اسفند`
   - نام ماه‌های انگلیسی: `January`, `February`, `March`, ... `December` و مخفف‌ها `Jan`, `Feb`, ...
   - فرمت "13 February 2026" یا "February 13, 2026"
   - اعداد + نام ماه (فارسی یا انگلیسی) + سال

2. الگوهای جدید regex:
   ```
   /\d{1,2}\s*(?:ی|)\s*(?:ژانویه|فوریه|مارس|آوریل|...)/i
   /(?:january|february|march|...)\s*\d{1,2}/i
   /\d{1,2}\s+(?:january|february|march|...)/i
   ```

### چه چیزی تغییر نمی‌کند
- منطق تولید تصویر (۵ تصویر موازی با GPT Image) - این بخش درست کار می‌کند
- فرمت خروجی Markdown با تصاویر
- سایر ایجنت‌ها

### جزئیات فنی
تنها تغییر در آرایه `datePatterns` در خط ~2873 فایل `ai-agent/index.ts` است. با اضافه کردن الگوهای جدید، وقتی کاربر "13 فوریه ی 2026" ارسال کند، `hasDate = true` شده و جریان تولید ۵ تصویر فعال می‌شود.
