

# Ø±ÙØ¹ Ù…Ø´Ú©Ù„ ØªÙˆÙ„ÛŒØ¯ Ù†Ø´Ø¯Ù† ØªØµÙˆÛŒØ± Ø¯Ø± Ø§ÛŒØ¬Ù†Øª Pixel

## Ù…Ø´Ú©Ù„ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒâ€ŒØ´Ø¯Ù‡

Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± ØªÙˆÙ„ÛŒØ¯ ØªØµÙˆÛŒØ± ÙÙ‚Ø· Ø²Ù…Ø§Ù†ÛŒ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø± ÛŒÚ© **ØªØ§Ø±ÛŒØ® Ù…Ø´Ø®Øµ** ÙˆØ§Ø±Ø¯ Ú©Ù†Ø¯ (Ù…Ø«Ù„Ø§Ù‹ "2026-02-13"ØŒ "today"ØŒ ÛŒØ§ "1"). Ø§Ù…Ø§ ÙˆÙ‚ØªÛŒ Ú©Ø§Ø±Ø¨Ø± Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒÛŒ Ù…Ø«Ù„ "Plan this week's social content" ÛŒØ§ "Ù…Ø­ØªÙˆØ§ÛŒ Ø§ÛŒÙ† Ù‡ÙØªÙ‡ Ø±Ùˆ Ø¨Ø³Ø§Ø²" Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŒ Ù‡ÛŒÚ†â€ŒÚ©Ø¯Ø§Ù… Ø§Ø² Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ ØªØ§Ø±ÛŒØ® (datePatterns) ØªØ·Ø¨ÛŒÙ‚ Ù¾ÛŒØ¯Ø§ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ Ùˆ ØªØµÙˆÛŒØ±ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.

### Ø¬Ø±ÛŒØ§Ù† ÙØ¹Ù„ÛŒ (Ø®Ø±Ø§Ø¨)

```text
Ú©Ø§Ø±Ø¨Ø±: "Plan this week's social content"
  â†’ datePatterns check â†’ Ù‡ÛŒÚ† ØªØ§Ø±ÛŒØ®ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯
  â†’ Ø±Ø¯ Ø´Ø¯Ù† Ø§Ø² Ø¨Ø®Ø´ ØªÙˆÙ„ÛŒØ¯ ØªØµÙˆÛŒØ±
  â†’ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ AI Ù…Ø¹Ù…ÙˆÙ„ÛŒ â†’ Ù¾Ø§Ø³Ø® Ù…ØªÙ†ÛŒ Ø¨Ø¯ÙˆÙ† ØªØµÙˆÛŒØ±
```

### Ø¬Ø±ÛŒØ§Ù† Ø¯Ø±Ø³Øª (Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØµÙ„Ø§Ø­)

```text
Ú©Ø§Ø±Ø¨Ø±: "Plan this week's social content"
  â†’ datePatterns check â†’ Ù‡ÛŒÚ† ØªØ§Ø±ÛŒØ®ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯
  â†’ contentPlanPatterns check â†’ "plan" + "content" = ØªØ·Ø¨ÛŒÙ‚!
  â†’ ØªØ§Ø±ÛŒØ® Ø§Ù…Ø±ÙˆØ² Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯
  â†’ Ø´Ø±ÙˆØ¹ ØªÙˆÙ„ÛŒØ¯ 5 ØªØµÙˆÛŒØ±
```

## ØªØºÛŒÛŒØ±Ø§Øª

### ÙØ§ÛŒÙ„: `supabase/functions/ai-agent/index.ts`

**ÛŒÚ© Ø¨Ù„ÙˆÚ© Ø´Ø±Ø·ÛŒ Ø¬Ø¯ÛŒØ¯** Ø¨Ø¹Ø¯ Ø§Ø² Ø¨Ø±Ø±Ø³ÛŒ datePatterns Ùˆ Ù‚Ø¨Ù„ Ø§Ø² `if (hasDate)` Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯:

Ø§Ú¯Ø± ØªØ§Ø±ÛŒØ®ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ ÙˆÙ„ÛŒ Ù¾ÛŒØ§Ù… Ø­Ø§ÙˆÛŒ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ Ø¨Ø§Ø´Ø¯ (Ù…Ø«Ù„ "plan", "content", "generate", "create posts", "Ù¾Ø³Øª Ø¨Ø³Ø§Ø²", "Ù…Ø­ØªÙˆØ§", "ØªÙˆÙ„ÛŒØ¯"), ØªØ§Ø±ÛŒØ® Ø§Ù…Ø±ÙˆØ² Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯ Ùˆ Ø¬Ø±ÛŒØ§Ù† ØªÙˆÙ„ÛŒØ¯ ØªØµÙˆÛŒØ± ÙØ¹Ø§Ù„ Ø´ÙˆØ¯.

Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ:

| Ø§Ù„Ú¯Ùˆ | Ù…Ø«Ø§Ù„ |
|------|-------|
| plan + content/posts | "Plan this week's social content" |
| generate/create + posts/content | "Generate 5 posts for today" |
| Ù…Ø­ØªÙˆØ§/Ù¾Ø³Øª + Ø¨Ø³Ø§Ø²/ØªÙˆÙ„ÛŒØ¯ | "Ù…Ø­ØªÙˆØ§ÛŒ Ø§Ù…Ø±ÙˆØ² Ø±Ùˆ Ø¨Ø³Ø§Ø²" |
| Ø¹Ø¯Ø¯ + posts | "Create 5 posts" |
| schedule + week/month | "Schedule this week" |

Ú©Ø¯ ØªØºÛŒÛŒØ±:

```typescript
// After: const hasDate = datePatterns.some(p => p.test(message));
// Add content plan detection as fallback
let effectiveHasDate = hasDate;
if (!hasDate) {
  const contentPlanPatterns = [
    /\b(?:plan|generate|create|make|build|schedule)\b.*\b(?:post|content|image)/i,
    /\b(?:post|content|image).*\b(?:plan|generate|create|make|build|schedule)\b/i,
    /\b\d+\s*(?:post|image)/i,
    /(?:Ù…Ø­ØªÙˆØ§|Ù¾Ø³Øª|ØªØµÙˆÛŒØ±|Ø¹Ú©Ø³).*(?:Ø¨Ø³Ø§Ø²|ØªÙˆÙ„ÛŒØ¯|Ø§ÛŒØ¬Ø§Ø¯|Ø¨Ø²Ù†)/i,
    /(?:Ø¨Ø³Ø§Ø²|ØªÙˆÙ„ÛŒØ¯|Ø§ÛŒØ¬Ø§Ø¯).*(?:Ù…Ø­ØªÙˆØ§|Ù¾Ø³Øª|ØªØµÙˆÛŒØ±|Ø¹Ú©Ø³)/i,
    /\bthis\s+week/i,
    /\bthis\s+month/i,
  ];
  if (contentPlanPatterns.some(p => p.test(message))) {
    const todayStr = new Date().toISOString().split("T")[0];
    message = todayStr;
    effectiveHasDate = true;
    console.log("ğŸ“¸ Pixel: Content plan request detected, using today's date â†’", todayStr);
  }
}

// Change: if (hasDate) â†’ if (effectiveHasDate)
```

Ø³Ù¾Ø³ `if (hasDate)` Ø¨Ù‡ `if (effectiveHasDate)` ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

## Ú†Ø±Ø§ Ø§ÛŒÙ† Ú©Ø§ÙÛŒ Ø§Ø³ØªØŸ

- Ø¨Ù‚ÛŒÙ‡ Ù…Ù†Ø·Ù‚ ØªÙˆÙ„ÛŒØ¯ ØªØµÙˆÛŒØ± (ØªÙˆÙ„ÛŒØ¯ prompt ØªÙˆØ³Ø· AIØŒ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ GPT ImageØŒ Ø¢Ù¾Ù„ÙˆØ¯ Ø¨Ù‡ storage) Ù‡Ù…Ù‡ Ø¯Ø±Ø³Øª Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.
- ÙÙ‚Ø· Ù…Ø´Ú©Ù„ **Ø´Ø±Ø· ÙˆØ±ÙˆØ¯ÛŒ** (gate condition) Ø¨ÙˆØ¯ Ú©Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¨Ø¯ÙˆÙ† ØªØ§Ø±ÛŒØ® ØµØ±ÛŒØ­ Ø±Ø§ Ø±Ø¯ Ù…ÛŒâ€ŒÚ©Ø±Ø¯.
- Ù‡ÛŒÚ† ØªØºÛŒÛŒØ±ÛŒ Ø¯Ø± ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ Ù„Ø§Ø²Ù… Ù†ÛŒØ³Øª.
- Ù‡ÛŒÚ† ØªØºÛŒÛŒØ±ÛŒ Ø¯Ø± Ø§ÛŒØ¬Ù†Øªâ€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.

