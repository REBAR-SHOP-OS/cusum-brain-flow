

## ุงุตูุงุญ ุณุงุฎุชุงุฑ ุฎุฑูุฌ Pixel: ฺฉูพุดู ุชุจูุบุงุช + ุชุฑุฌูู ูุงุฑุณ + ููฺฏู ุงุฌุจุงุฑ

### ุฎูุงุตู ุชุบุฑุงุช

ุณู ูุดฺฉู ุงุตู ุญู ูโุดูุฏ:
1. ุณุงุฎุชุงุฑ ฺฉูพุดู ุจุงุฏ ุฏููุงู ุงู ุชุฑุชุจ ุฑุง ุฏุงุดุชู ุจุงุดุฏ: **ูุชู ุชุจูุบุงุช (ุจุฏูู ุชุถูู)** โ **ุขุฏุฑุณ ู ุดูุงุฑู ุชูุงุณ** โ **ูุดุชฺฏโูุง**
2. ุฒุฑ ูุดุชฺฏโูุง ุจุงุฏ **ุชุฑุฌูู ูุงุฑุณ** ูุชู ุฑู ุนฺฉุณ ู ฺฉูพุดู ุงุถุงูู ุดูุฏ (ููุท ุจุฑุง ุงุทูุงุนโุฑุณุงู ุดูุงุ ูุจุงุฏ ุจู social_posts ุงุฑุณุงู ุดูุฏ)
3. ููฺฏู ุดุฑฺฉุช ุจุงุฏ **ููุดู ุจุฏูู ุชุบุฑ** ุฏุฑ ุนฺฉุณ ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ

---

### ุชุบุฑุงุช ูุงูโูุง

#### 1. `supabase/functions/_shared/agents/marketing.ts` โ ุงุตูุงุญ ูพุฑุงูุช Pixel

ุจุฎุด `social` prompt ุจุงุฒููุณ ูโุดูุฏ:

**CAPTION RULES ุฌุฏุฏ:**
- ูุชู ฺฉูพุดู ุจุงุฏ ุตุฑูุงู ุชุจูุบุงุช ุจุงุดุฏ โ ูฺ ุนุจุงุฑุช ุชุถูู ูุซู "guaranteed", "we guarantee", "100% safe" ูุฌุงุฒ ูุณุช
- ุชุฑุชุจ ุงุฌุจุงุฑ ุฎุฑูุฌ:
  1. ุนฺฉุณ (markdown image)
  2. ูุชู ุชุจูุบุงุช ุงูฺฏูุณ (compelling, promotional, NO guarantees)
  3. ุขุฏุฑุณ ู ุดูุงุฑู ุชูุงุณ ุดุฑฺฉุช
  4. ูุดุชฺฏโูุง
  5. ุจุฎุด `---PERSIAN---` ุดุงูู ุชุฑุฌูู ูุงุฑุณ ูุชู ุฑู ุนฺฉุณ ู ุชุฑุฌูู ูุงุฑุณ ฺฉูพุดู

**IMAGE RULES ุชููุชโุดุฏู:**
- ููฺฏู REBAR.SHOP ุจุงุฏ ุฏููุงู ููุงูโุทูุฑ ฺฉู ูุณุช (ุจุฏูู ูฺ ุชุบุฑ ุฏุฑ ุฑูฺฏุ ุงูุฏุงุฒู ูุณุจุ ุง ุดฺฉู) ุฏุฑ ูุฑ ุนฺฉุณ ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ
- ุฏุฑ prompt ุชููุฏ ุนฺฉุณุ ุนุจุงุฑุช "include the exact REBAR.SHOP logo without any modification to its appearance" ุงุถุงูู ูโุดูุฏ

**ูุฑูุช ุฎุฑูุฌ ููููู:**
```text
![Product](https://...social-images/...)

๐๏ธ Start your morning with precision-cut Rebar Stirrups...

๐ 9 Cedar Ave, Thornhill, Ontario
๐ 647-260-9403
๐ www.rebar.shop

#RebarStirrups #ConstructionLife #RebarShop ...

---PERSIAN---
๐ผ๏ธ ูุชู ุฑู ุนฺฉุณ: ุฎุงููุชโูุง ุขุฑูุงุชูุฑ โ ุงุณุชุญฺฉุงู ุงุฒ ูพุงู
๐ ุชุฑุฌูู ฺฉูพุดู: ุตุจุญ ุฎูุฏ ุฑุง ุจุง ุฎุงููุชโูุง ุขุฑูุงุชูุฑ ุจุฑุดโุฎูุฑุฏู ุฏูู ุขุบุงุฒ ฺฉูุฏ...
```

#### 2. `src/components/social/PixelPostCard.tsx` โ ุงุถุงูู ฺฉุฑุฏู ููุฏ ุชุฑุฌูู ูุงุฑุณ

- ููุฏ `persianTranslation?: string` ุจู interface `PixelPostData` ุงุถุงูู ูโุดูุฏ
- ุฒุฑ ูุดุชฺฏโูุงุ ุงฺฏุฑ `persianTranslation` ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ุฏุฑ ฺฉ ุจููฺฉ ุฌุฏุงฺฏุงูู ุจุง ูพุณโุฒููู ูุชูุงูุช ู ุนููุงู "๐ฎ๐ท Persian Translation (internal)" ููุงุด ุฏุงุฏู ูโุดูุฏ
- ุงู ุจุฎุด ููุท ููุงุด ุงุณุช ู ุฏุฑ approve ุงุฑุณุงู ููโุดูุฏ

#### 3. `src/components/social/PixelChatRenderer.tsx` โ ุฌุฏุงุณุงุฒ ุชุฑุฌูู ูุงุฑุณ ุงุฒ ฺฉูพุดู

- ุฏุฑ ุชุงุจุน `extractPostData`ุ ูุชู ุจุนุฏ ุงุฒ `---PERSIAN---` ุฌุฏุง ูโุดูุฏ ู ุจู ููุฏ `persianTranslation` ููุชูู ูโุดูุฏ
- ูุชู ูุจู ุงุฒ `---PERSIAN---` ุจูโุนููุงู `caption` ุงุตู (ุงูฺฏูุณ) ุจุงู ูโูุงูุฏ
- ูุดุชฺฏโูุง ููฺูุงู ุฌุฏุงฺฏุงูู ุงุณุชุฎุฑุงุฌ ูโุดููุฏ
- ูุชุฌู: ููุช ฺฉุงุฑุจุฑ Approve ูโุฒูุฏุ ููุท caption ุงูฺฏูุณ + ูุดุชฺฏโูุง ุจู `social_posts` ูโุฑูุฏ

#### 4. `src/pages/AgentWorkspace.tsx` โ ุงุทููุงู ุงุฒ ุนุฏู ุงุฑุณุงู ุชุฑุฌูู ูุงุฑุณ

- ุฏุฑ `handleApprovePost`ุ ููุท `post.caption` (ุจุฏูู persianTranslation) ุจู `social_posts.content` ุฐุฎุฑู ูโุดูุฏ
- ุจุฏูู ุชุบุฑ ุงุถุงู ูุงุฒู ุงุณุช ฺูู persianTranslation ููุฏ ุฌุฏุงฺฏุงููโุง ุงุณุช

---

### ุฌุฒุงุช ูู

**ูพุงุฑุณูฺฏ ุชุฑุฌูู ูุงุฑุณ:**
```text
const persianSeparator = "---PERSIAN---";
const persianIdx = textContent.indexOf(persianSeparator);
if (persianIdx !== -1) {
  persianTranslation = textContent.slice(persianIdx + persianSeparator.length).trim();
  textContent = textContent.slice(0, persianIdx).trim();
}
```

**ููุงูู ููููุนุช ุชุถูู ุฏุฑ prompt:**
- ุนุจุงุฑุงุช ููููุน: "guaranteed", "we guarantee", "100% guaranteed", "ensure", "promise"
- ุฌุงฺฏุฒูโูุง: "designed for", "built for", "engineered for", "precision-crafted"

**ููฺฏู:**
- ุฏุฑ prompt ุชููุฏ ุนฺฉุณุ instruction ุตุฑุญ ุงุถุงูู ูโุดูุฏ ฺฉู ููฺฏู ุจุงุฏ ุจุฏูู ูฺ ุชุบุฑ ุฏุฑ ุธุงูุฑุ ุฑูฺฏุ ุง ุดฺฉู ุงุตู ุฎูุฏ ุฏุฑ ุชุตูุฑ ูุฑุงุฑ ุจฺฏุฑุฏ

---

### ูุงูโูุง ุชุบุฑุงูุชู

| ูุงู | ุชุบุฑ |
|------|-------|
| `supabase/functions/_shared/agents/marketing.ts` | ุงุตูุงุญ prompt: ููููุนุช ุชุถููุ ุชุฑุชุจ ุฎุฑูุฌุ ุจุฎุด ุชุฑุฌูู ูุงุฑุณุ ููฺฏู ุจุฏูู ุชุบุฑ |
| `src/components/social/PixelPostCard.tsx` | ุงุถุงูู ฺฉุฑุฏู ููุฏ persianTranslation ู ููุงุด ุขู |
| `src/components/social/PixelChatRenderer.tsx` | ุฌุฏุงุณุงุฒ ุชุฑุฌูู ูุงุฑุณ ุงุฒ caption ุงุตู |
| `src/pages/AgentWorkspace.tsx` | ุจุฏูู ุชุบุฑ ุนููฺฉุฑุฏ (persianTranslation ุฎูุฏฺฉุงุฑ exclude ุงุณุช) |

### ูฺฉุงุช ููู
- ุชุฑุฌูู ูุงุฑุณ ูุฑฺฏุฒ ุจู `social_posts` ุงุฑุณุงู ููโุดูุฏ
- ุณุงุฑ ุงุฌูุชโูุง ูฺ ุชุบุฑ ููโฺฉููุฏ
- ููฺฏู ุจุงุฏ ุฏููุงู ุจุฏูู ุชุบุฑ ุฏุฑ ูุฑ ุนฺฉุณ ุจุงุดุฏ
